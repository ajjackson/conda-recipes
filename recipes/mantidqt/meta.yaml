{% set version = "6.3.20220228.1622" %}
{% set git_commit = "8421cc9f29f9fcfe914ab142a7fbe0a64fbe6c2c" %}

package:
  name: mantidqt
  version: {{ version }}

source:
  url: https://github.com/mantidproject/mantid/archive/{{ git_commit }}.tar.gz
  sha256: 6d914d7dcae13e827d6cc803e0d463c99d91a9ed23fbc84ae767f3c77e73e783

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('mantidqt', max_pin='x.x.x') }}

requirements:
  build:
    - {{ compiler("c") }}
    - {{ compiler("cxx") }}
    - llvm-openmp  # [osx]
    - libgomp  # [linux]
    - ninja  # [unix]
    - cmake
    - git
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libxxf86vm') }}  # [linux]
    - {{ cdt('libx11-devel') }}  # [linux]
    - {{ cdt('xorg-x11-proto-devel') }}  # [linux]

  host:
    - eigen
    - jemalloc  # [unix]
    - mantid {{ version }}
    - python
    - pyqt
    - qt {{ qt }}
    - qscintilla2
    - setuptools {{ setuptools }}
    - tbb-devel {{ tbb }}

  run:
    - matplotlib {{ matplotlib }}
    - toml
    - {{ pin_compatible("qscintilla2", max_pin="x.x") }}
    - qtpy
    - python
    
test:
  imports:
    - mantidqt
    - mantidqt.icons

about:
  home: https://github.com/mantidproject/mantid
  license: GPL-3.0-or-later
  summary: Mantid provides a framework that supports high-performance computing and visualisation of materials science data.

extra:
  recipe-maintainers:
    - StephenSmith25
    - Pasarus